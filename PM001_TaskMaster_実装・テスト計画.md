# PM001 TaskMaster 実装・テスト計画書

## 📋 プロジェクト基本情報
- **プロジェクトID**: PM001
- **システム名**: 郵便物発送管理システム
- **技術基盤**: Google Apps Script (GAS)
- **対象規模**: 最大80名利用・同時接続5名
- **作成日**: 2025年7月3日
- **管理ツール**: TaskMaster AI

---

## 🎯 TaskMaster実装計画

### Phase 1: 基盤実装【緊急度：高】
**期間**: 3-5日間

#### Task 1.1: GASプロジェクト基盤構築
```
Task ID: PM001-T1.1
優先度: 🔴 Critical
担当者: 実装担当AI（ChatGPT/Claude Code）
期限: Day 1
依存関係: なし

実装内容:
□ Google Apps Scriptプロジェクト作成
□ appsscript.json設定
□ 基本ファイル構造作成（Code.gs, Database.gs, WebApp.gs, Utils.gs）
□ プロジェクト初期化関数実装

完成条件:
- GAS WebApp URLが取得できる
- 基本的なdoGet/doPostが動作する
- エラーハンドリングが実装されている

テスト項目:
□ WebApp URLアクセス確認
□ 基本API呼び出し確認
□ エラー処理動作確認
```

#### Task 1.2: データベース基盤実装
```
Task ID: PM001-T1.2
優先度: 🔴 Critical
担当者: 実装担当AI
期限: Day 1-2
依存関係: T1.1完了後

実装内容:
□ Google Spreadsheetデータベース作成
□ 5テーブル構造実装（Customers, Addresses, Shipping, UserHistory, AddressUsage）
□ 基本CRUD操作実装
□ データ初期化処理実装

完成条件:
- 全テーブルが正しく作成される
- 基本的なデータ保存・取得ができる
- データ整合性が保たれる

テスト項目:
□ テーブル作成確認
□ データ保存・取得テスト
□ データ型・制約確認
```

#### Task 1.3: 料金計算エンジン実装
```
Task ID: PM001-T1.3
優先度: 🟡 High
担当者: 実装担当AI
期限: Day 2
依存関係: T1.1完了後

実装内容:
□ 新料金体系実装（規格内・規格外・レターパックライト）
□ 速達オプション計算
□ 料金計算API実装
□ フロントエンド連携

完成条件:
- 全発送方法の料金が正確に計算される
- リアルタイム料金プレビューが動作する
- エラーケースも適切に処理される

テスト項目:
□ 規格内料金計算テスト（全重量パターン）
□ 規格外料金計算テスト（全重量パターン）
□ レターパックライト固定料金テスト
□ 速達オプションテスト
□ 境界値テスト
```

### Phase 2: コア機能実装【緊急度：高】
**期間**: 5-7日間

#### Task 2.1: 顧客管理機能実装
```
Task ID: PM001-T2.1
優先度: 🟡 High
担当者: 実装担当AI
期限: Day 3-4
依存関係: T1.2完了後

実装内容:
□ 顧客登録機能（会社名フィールド対応）
□ 顧客一覧表示
□ 顧客編集・削除機能
□ 顧客検索機能（氏名・会社名）

完成条件:
- 顧客の登録・編集・削除が正常動作
- 会社名フィールドが正しく保存される
- 検索機能が高速動作（1秒以内）

テスト項目:
□ 顧客登録テスト（必須項目・任意項目）
□ 会社名フィールドテスト
□ 検索機能テスト（部分一致・OR検索）
□ データバリデーションテスト
```

#### Task 2.2: 宛名管理機能実装
```
Task ID: PM001-T2.2
優先度: 🟡 High
担当者: 実装担当AI
期限: Day 4-5
依存関係: T2.1完了後

実装内容:
□ 宛名登録機能
□ 宛名一覧表示
□ 宛名編集・削除機能
□ 顧客-宛名関連付け

完成条件:
- 宛名の登録・編集・削除が正常動作
- 顧客との関連付けが正しく機能
- 住所データの整合性が保たれる

テスト項目:
□ 宛名登録テスト
□ 顧客関連付けテスト
□ 郵便番号バリデーションテスト
□ 住所データ整合性テスト
```

#### Task 2.3: 4パターン宛名選択機能実装
```
Task ID: PM001-T2.3
優先度: 🟡 High
担当者: 実装担当AI
期限: Day 5-6
依存関係: T2.2完了後

実装内容:
□ パターン1: 顧客データベース検索
□ パターン2: ユーザー履歴選択
□ パターン3: 全体履歴選択
□ パターン4: 新規宛名登録
□ UI切り替え機能

完成条件:
- 4つの選択パターンすべてが動作
- パターン間の切り替えがスムーズ
- データの一貫性が保たれる

テスト項目:
□ 各パターンの動作テスト
□ パターン切り替えテスト
□ データ整合性テスト
□ パフォーマンステスト
```

### Phase 3: 発送管理実装【緊急度：高】
**期間**: 3-4日間

#### Task 3.1: 発送記録機能実装
```
Task ID: PM001-T3.1
優先度: 🔴 Critical
担当者: 実装担当AI
期限: Day 6-7
依存関係: T1.3, T2.3完了後

実装内容:
□ 発送記録登録機能
□ 追跡番号機能（レターパックライト専用）
□ 発送履歴表示
□ 発送記録編集・削除

完成条件:
- 発送記録の登録が正常動作
- 追跡番号がレターパックライト時のみ表示
- 履歴表示が高速動作

テスト項目:
□ 発送記録登録テスト
□ 追跡番号表示制御テスト
□ 料金自動計算テスト
□ 履歴表示パフォーマンステスト
```

#### Task 3.2: 履歴管理機能実装
```
Task ID: PM001-T3.2
優先度: 🟠 Medium
担当者: 実装担当AI
期限: Day 7-8
依存関係: T3.1完了後

実装内容:
□ ユーザー履歴管理
□ 宛名使用統計
□ 履歴データ更新
□ 統計情報表示

完成条件:
- 履歴データが正確に記録される
- 統計情報が正しく表示される
- データの重複がない

テスト項目:
□ 履歴記録テスト
□ 統計計算テスト
□ データ重複チェック
□ パフォーマンステスト
```

### Phase 4: UI/UX完成【緊急度：中】
**期間**: 2-3日間

#### Task 4.1: UI統合・最適化
```
Task ID: PM001-T4.1
優先度: 🟠 Medium
担当者: 実装担当AI
期限: Day 8-9
依存関係: T3.2完了後

実装内容:
□ レスポンシブデザイン実装
□ UI統合・最適化
□ ローディング・フィードバック実装
□ エラー表示改善

完成条件:
- モバイル・デスクトップ両対応
- 操作性が直感的
- エラーメッセージが分かりやすい

テスト項目:
□ レスポンシブテスト
□ ユーザビリティテスト
□ アクセシビリティテスト
□ ブラウザ互換性テスト
```

---

## 🧪 TaskMaster テスト計画

### テストフェーズ1: 単体テスト【Day 1-8並行実行】

#### UT-1: 料金計算テスト
```
テストID: PM001-UT1
実行タイミング: Task 1.3完了後
担当者: テスト担当AI（Gemini）
自動化レベル: 完全自動

テストケース:
□ 規格内50g以内 → 140円
□ 規格内100g以内 → 180円
□ 規格内150g以内 → 270円
□ 規格内250g以内 → 320円
□ 規格外50g以内 → 260円
□ 規格外100g以内 → 290円
□ 規格外150g以内 → 390円
□ 規格外250g以内 → 450円
□ レターパックライト → 430円
□ 速達オプション → +250円
□ 境界値テスト（49g, 50g, 51g等）
□ 異常値テスト（負の値、文字列等）

合格基準: 全テストケース100%合格
```

#### UT-2: データベース操作テスト
```
テストID: PM001-UT2
実行タイミング: Task 1.2完了後
担当者: テスト担当AI
自動化レベル: 完全自動

テストケース:
□ 顧客データCRUD操作
□ 宛名データCRUD操作
□ 発送記録CRUD操作
□ 履歴データ更新
□ データ整合性チェック
□ トランザクション整合性
□ 同時アクセステスト（5名同時）
□ データ型制約テスト

合格基準: 全操作が正常完了、データ損失なし
```

### テストフェーズ2: 統合テスト【Day 6-9】

#### IT-1: エンドツーエンドシナリオテスト
```
テストID: PM001-IT1
実行タイミング: Phase 3完了後
担当者: テスト担当AI + 人間テスター
自動化レベル: 半自動（シナリオ自動、検証手動）

テストシナリオ:
シナリオ1: 新規顧客〜発送完了
□ 新規顧客登録
□ 宛名情報登録
□ 発送方法選択・料金計算
□ 発送記録保存
□ 履歴確認

シナリオ2: 既存顧客〜履歴活用発送
□ 顧客検索
□ 過去履歴から宛名選択
□ 発送記録登録
□ 追跡番号入力（レターパック）

シナリオ3: 複数ユーザー同時利用
□ 5名同時ログイン
□ 同時発送記録登録
□ データ整合性確認

合格基準: 全シナリオが10分以内で完了、エラーなし
```

### テストフェーズ3: パフォーマンステスト【Day 9-10】

#### PT-1: 負荷テスト
```
テストID: PM001-PT1
実行条件: 統合テスト完了後
担当者: テスト担当AI
自動化レベル: 完全自動

テスト項目:
□ 同時接続5名での応答時間
□ データ1000件での検索性能
□ 連続100回料金計算
□ ピーク時想定負荷テスト
□ メモリ使用量監視
□ GAS実行時間監視

合格基準:
- 応答時間: 平均2秒以内
- エラー率: 1%未満
- GAS実行時間: 制限の50%以内
```

### テストフェーズ4: ユーザー受け入れテスト【Day 10-12】

#### UAT-1: 実ユーザーテスト
```
テストID: PM001-UAT1
実行条件: 全機能実装完了後
担当者: 実際の利用者5-10名
期間: 2-3日間

テスト項目:
□ 実際の業務フローでの操作
□ ユーザビリティ評価
□ エラー・改善要望収集
□ パフォーマンス体感評価
□ マニュアル・ヘルプ評価

合格基準:
- 満足度評価: 4.0/5.0以上
- 致命的バグ: 0件
- 操作完了率: 95%以上
```

---

## 📊 TaskMaster進捗管理

### プロジェクト全体スケジュール
```
Day 1-2:  Phase 1 基盤実装
Day 3-6:  Phase 2 コア機能実装
Day 6-8:  Phase 3 発送管理実装
Day 8-9:  Phase 4 UI完成
Day 9-10: パフォーマンステスト
Day 10-12: ユーザー受け入れテスト
Day 12-14: 本番リリース準備
```

### 重要マイルストーン
- **Day 2**: 基盤完成（技術的実現性確認）
- **Day 6**: コア機能完成（基本業務フロー確認）
- **Day 9**: 全機能完成（総合動作確認）
- **Day 12**: ユーザー受け入れ完了（リリース判定）

### リスク管理
| リスク | 影響度 | 対策 |
|--------|--------|------|
| GAS制限到達 | 高 | 軽量化・分割処理 |
| 同時アクセスエラー | 中 | Lock Service実装 |
| データ移行失敗 | 中 | バックアップ・段階移行 |
| ユーザー受け入れ遅延 | 低 | 早期フィードバック収集 |

---

## 🎯 TaskMaster品質ゲート

### Gate 1: 基盤完成ゲート（Day 2）
- [ ] GAS WebApp正常動作
- [ ] データベース基本機能動作
- [ ] 料金計算100%正確
- [ ] エラーハンドリング実装

### Gate 2: 機能完成ゲート（Day 6）
- [ ] 4パターン宛名選択動作
- [ ] 顧客・宛名管理完全動作
- [ ] 検索機能1秒以内応答
- [ ] データ整合性100%

### Gate 3: 統合完成ゲート（Day 9）
- [ ] エンドツーエンドシナリオ完全動作
- [ ] 5名同時アクセス問題なし
- [ ] UI/UX満足度4.0以上
- [ ] パフォーマンス基準達成

### Gate 4: リリース判定ゲート（Day 12）
- [ ] ユーザー受け入れテスト完了
- [ ] 致命的バグ0件
- [ ] 運用マニュアル完成
- [ ] サポート体制確立

---

## 🚀 TaskMaster実行コマンド

### 日次実行コマンド
```bash
# 進捗確認
PM001 TaskMaster 進捗確認

# タスク更新
PM001 TaskMaster タスク更新

# テスト実行
PM001 TaskMaster テスト実行

# 品質ゲートチェック
PM001 TaskMaster ゲートチェック
```

### 週次実行コマンド
```bash
# 全体レビュー
PM001 TaskMaster 週次レビュー

# リスク評価
PM001 TaskMaster リスク評価

# スケジュール調整
PM001 TaskMaster スケジュール調整
```

---

**このTaskMaster計画書により、PM001プロジェクトの実装・テストが体系的に管理され、確実な成功を実現します。**